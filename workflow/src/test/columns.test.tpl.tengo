// columns-test

self := import("@milaboratory/tengo-sdk:tpl")
assets := import("@milaboratory/tengo-sdk:assets")
render := import("@milaboratory/tengo-sdk:render")

getPresetTpl := assets.importTemplate(":get-preset")
getPresetSpecTpl := assets.importTemplate(":get-preset-spec")
calculateColumnsParamsTpl := assets.importTemplate(":calculate-pfconv-params")

self.defineOutputs("conf")

self.body(func(inputs) {
	presetName := inputs.presetName

	preset := render.create(getPresetTpl, {
		preset: presetName
	}).output("preset")

	specs := render.create(getPresetSpecTpl, {
		preset: presetName
	}).output("specs")

	pfconvConfig := render.create(calculateColumnsParamsTpl, {
		preset: preset,
		specs: specs
	}).output("params")

	return {
		conf: pfconvConfig
	}
})
